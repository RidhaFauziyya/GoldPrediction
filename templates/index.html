<!DOCTYPE html>
<html lang="en">
   <head>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <title>Gold Prediction</title>
      <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
      <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
      <script src="https://unpkg.com/gijgo@1.9.14/js/gijgo.min.js" type="text/javascript"></script>
      <link href="https://unpkg.com/gijgo@1.9.14/css/gijgo.min.css" rel="stylesheet" type="text/css" />
      <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
      <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
       <!-- Custom styles for this template-->
      <link href="{{ url_for('static', filename='style.css') }}" rel="stylesheet">
    </head>

   <body class="bg-gold">
      
      <nav class="navbar navbar-light bg-black">
         <div class="container-fluid">
            <a class="navbar-brand" href="#">
              <img src="{{url_for('static', filename='logo.png')}}" alt="" width="100" height="50" class="d-inline-block align-text-top">
              <p class="ps-5 mb-0 fw-bolder">GOLD PRICE PREDICTION</p>
            </a>
         </div>
      </nav>
      <div class="content">
         <h1 class="text-center">International Gold Price Prediction per Troy Ounce</h1>
         <form method = "post" action = "/result/">
            <div class="row justify-content-center">
               <div class="col-sm-3">
                  <div class='input-group date' id='picker'>
                     <input id="datepicker" placeholder="Date"/>
                  </div>
               </div>
               <div class="col-sm-3">
                  <select class="form-select mb-3" aria-label="Default select example">
                     <option selected>Currency</option>
                     <option value="idr">IDR</option>
                     <option value="usd">USD</option>
                   </select>
               </div>
               <div class="col-auto">
                  <button type="submit" class="btn btn-black mb-3">Predict</button>
               </div>
            </div>
         </form>

         <div class="mt-5">
            <h2 class="fw-bold">Gold Price per Troy Once</h2>
            <table class="tgl table align-middle text-center table-borderless w-25 mt-3">
               <tr class="text-white">
                  <th class="bg-black">From</th>
                  <th class="bg-black">3 January 2014</th>
                  <th></th>
                  <th class="bg-black">To</th>
                  <th class="bg-black">15 March 2024</th>
               </tr>
            </table>
            <canvas id="lineChart" width="900" height="400"></canvas>
         </div>
      </div>

      <script>
         $('#datepicker').datepicker({
             uiLibrary: 'bootstrap5'
         });
      </script>

      <script>
         // Extracting data from Flask's context variables
         const dates = {{ dates | tojson | safe }};
         const prices_idr = {{ prices_idr | tojson | safe }};

         // Create the chart
         const ctx = document.getElementById('lineChart').getContext('2d');
         new Chart(ctx, {
            type: 'line',
            data: {
               labels: dates,
               datasets: [
                     {
                        label: 'Gold Price in IDR',
                        data: prices_idr,
                        borderColor: 'rgba(66, 54, 23)',
                        backgroundColor: 'rgba(222, 192, 115)',
                        borderWidth: 2,
                        fill: true
                     }
               ]
            },
            options: {
               responsive: true,
               scales: {
                     x: {
                        title: {
                           display: true,
                           text: 'Date'
                        }
                     },
                     y: {
                        title: {
                           display: true,
                           text: 'Price'
                        },
                        beginAtZero: false
                     }
               }
            }
         });
      </script>

      <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
   </body>
</html>